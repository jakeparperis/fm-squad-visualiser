// The JavaScript in this project was generated by AI

document.addEventListener('DOMContentLoaded', function() {
    window.showCard = function(playerId) {
        if (!playerId) return;

        const modal = document.getElementById('playerCardModal');

        if (modal.style.display === 'block' && modal.style.opacity === '1') {
            modal.style.opacity = '0';

            setTimeout(() => {
                fetchAndDisplayCard(playerId);
            }, 500);
        } else {
            fetchAndDisplayCard(playerId);
        }
    };

    function fetchAndDisplayCard(playerId) {
        fetch(`/show_card?player_id=${playerId}`)
            .then(response => response.text())
            .then(html => {
                const modal = document.getElementById('playerCardModal');
                modal.innerHTML = html;

                modal.style.display = 'block';
                setTimeout(() => {
                    modal.style.opacity = '1';
                }, 10);
            })
            .catch(error => console.error('Error fetching player card:', error));
    }

    document.addEventListener('click', function(event) {
        const modal = document.getElementById('playerCardModal');
        if (modal.style.display === 'block' && !modal.contains(event.target)) {
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 500);
        }
    });
});
